function loadVideoJsPlugin(){videojs.plugin("ABP",function(){function e(e){var n=this;if(this.danmuDiv=document.createElement("div"),this.danmuDiv.className="vjs-danmu",e.el().insertBefore(this.danmuDiv,e.el().getElementsByClassName("vjs-poster")[0]),this.danmuShowControl=document.createElement("div"),this.danmuShowControl.className="vjs-danmu-control vjs-menu-button vjs-control",this.danmuShowControlContent=document.createElement("span"),this.danmuShowControlContent.className="vjs-danmu-switch",this.danmuShowControlContent.innerHTML="弹幕",this.danmuShowControl.appendChild(this.danmuShowControlContent),e.el().getElementsByClassName("vjs-control-bar")[0].appendChild(this.danmuShowControl),"undefined"!=typeof CommentManager){this.cmManager=new CommentManager(this.danmuDiv),this.cmManager.options.global.scale=2,this.cmManager.init(),this.cmManager.clear();var t=e.el().children[0],a=0;t.addEventListener("progress",function(){a==t.currentTime?(t.hasStalled=!0,n.cmManager.stopTimer()):a=t.currentTime}),t.addEventListener("timeupdate",function(){n.cmManager.display!==!1&&(t.hasStalled&&(n.cmManager.startTimer(),t.hasStalled=!1),n.cmManager.time(Math.floor(1e3*t.currentTime)))}),t.addEventListener("play",function(){n.cmManager.startTimer()}),t.addEventListener("pause",function(){n.cmManager.stopTimer()}),t.addEventListener("waiting",function(){n.cmManager.stopTimer()}),t.addEventListener("playing",function(){n.cmManager.startTimer()}),t.addEventListener("seeked",function(){n.cmManager.seek(Math.floor(1e3*t.currentTime)),n.cmManager.clear()}),window&&window.addEventListener("resize",function(){n.cmManager.setBounds()}),this.danmuShowControl.addEventListener("click",function(){1==n.cmManager.display?(n.cmManager.display=!1,n.cmManager.clear(),n.danmuShowControlContent.innerHTML="无"):(n.cmManager.display=!0,n.danmuShowControlContent.innerHTML="弹幕")}),this.load=function(e,n){null==n&&(n=function(){});var a;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.open("GET",e,!0),a.send();var i=this.cmManager,r=t;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status)if("Microsoft Internet Explorer"==navigator.appName){var e=new ActiveXObject("Microsoft.XMLDOM");e.async=!1,e.loadXML(a.responseText),i.load(BilibiliParser(e)),i.seek(1e3*r.currentTime),n(!0)}else i.seek(1e3*r.currentTime),i.load(BilibiliParser(a.responseXML)),n(!0);else n(!1)}}}return this}this.danmu=new e(this)})}